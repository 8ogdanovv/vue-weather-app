import{r as l,o as f,w as p,a as h,b as a,c as t,F as k,d as w,e as d,f as S,g as N,t as I,i as u,h as D,j as P,_ as O,k as x,l as F,P as J}from"./index-rZcw7hHE.js";const W={key:0},B={key:0,class:"content favorites"},L={key:1},b=N("h2",null,"There is no pinned cities...",-1),j={key:1,class:"wrapper"},V={__name:"Favorites",setup(T){const r=l(!1),_=l(sessionStorage.getItem("favsDays")||1),n=l(JSON.parse(localStorage.getItem("favorites"))||[]),y=async()=>{if(r.value=!1,localStorage.getItem("favorites")){const s=JSON.parse(localStorage.getItem("favorites")),m=s.map(e=>e.city.name),i=s.map(async e=>await I(e.city.name)),c=await Promise.all(i);u.global.messages.en.cityNamesPinned=m.join("_"),u.global.messages.uk.cityNamesPinned=c.join("_");const o=new Date().toISOString().slice(0,10),g=s.map(async e=>{if(!e.weather||e.weather.current.time.slice(0,10)!==o){const v=await D(e.city.latitude,e.city.longitude);e.weather=v}return e});localStorage.setItem("favorites",JSON.stringify(await Promise.all(g)))}n.value=JSON.parse(localStorage.getItem("favorites"))||[],r.value=!0};return f(()=>{y()}),p(JSON.parse(localStorage.getItem("favorites")),()=>window.location.reload()),(s,m)=>{const i=h("router-link");return r.value===!0?(a(),t("div",W,[n.value.length?(a(),t("div",B,[(a(!0),t(k,null,w(n.value,(c,o)=>(a(),P(O,{key:o,cityWeather:c,displayDays:_.value,index:o},null,8,["cityWeather","displayDays","index"]))),128))])):(a(),t("div",L,[b,d(i,{to:"/"},{default:S(()=>[x("Go to the main page")]),_:1})])),d(F,{less:1,more:7,storageKey:"favsDays"})])):(a(),t("div",j,[d(J)]))}}};export{V as default};
